{"version":3,"sources":["./src/app/enter-otp/enter-otp.module.ts","./src/app/enter-otp/enter-otp.page.html","./src/app/enter-otp/enter-otp.page.ts","./src/app/enter-otp/enter-otp.page.scss","./src/app/enter-otp/enter-otp-routing.module.ts"],"names":[],"mappings":"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","file":"enter-otp-enter-otp-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { EnterOtpPageRoutingModule } from './enter-otp-routing.module';\n\nimport { EnterOtpPage } from './enter-otp.page';\nimport { NgOtpInputModule } from  'ng-otp-input';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    EnterOtpPageRoutingModule,\n    NgOtpInputModule\n  ],\n  declarations: [EnterOtpPage]\n})\nexport class EnterOtpPageModule {}\n","export default \"<ion-header class=\\\"ion-no-border\\\">\\n  <ion-toolbar >\\n    <ion-title color=\\\"primary\\\">OTP</ion-title>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"/\\\"></ion-back-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-grid  class=\\\"ion-margin-top\\\" class=\\\"ion-margin-top\\\" fixed>\\n    <ion-row class=\\\"auth-margin-top\\\" >\\n      <ion-col size=\\\"8\\\" offset=\\\"2\\\">\\n        <ion-text class=\\\"ion-text-center\\\" color=\\\"primary\\\">\\n          <h1 style=\\\"font-weight: bold;\\\">Verification code</h1>\\n     \\n        </ion-text>\\n        <ion-text class=\\\"ion-text-center\\\" style=\\\"color: rgb(160, 158, 158);\\\">\\n       \\n          <p>We have sent the code verification to your Mobile number.</p>\\n        </ion-text>\\n  \\n      </ion-col>\\n      <ion-col size=\\\"6\\\" offset=\\\"3\\\" >\\n              \\n        <ng-otp-input  (onInputChange)=\\\"getOTP($event)\\\"   [config]=\\\"{length:4}\\\"></ng-otp-input>\\n\\n        <!-- <ion-text class=\\\"ion-text-right\\\" color=\\\"dark\\\">\\n          <p style=\\\"font-size: 14px;\\\">Resend?</p>\\n        </ion-text> -->\\n      </ion-col>\\n      <ion-col size=\\\"8\\\" offset=\\\"2\\\">\\n        <ion-img src=\\\"assets/otp.png\\\"></ion-img>\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n  </ion-content>\\n  \\n  <ion-footer class=\\\"ion-no-border\\\">\\n   \\n   <ion-toolbar>\\n    <ion-button [disabled]=\\\"!isOtpValid\\\" (click)=\\\"verifyOtp()\\\" expand=\\\"full\\\" size=\\\"large\\\" >\\n      Login\\n     </ion-button>\\n   </ion-toolbar>\\n  \\n  </ion-footer>\";","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { AlertController, LoadingController } from '@ionic/angular';\nimport { environment } from 'src/environments/environment';\nimport { AuthService } from '../auth/auth.service';\nimport { StorageService } from '../services/storage.service';\nimport { HttpClient } from '@angular/common/http';\n\n@Component({\n  selector: 'app-enter-otp',\n  templateUrl: './enter-otp.page.html',\n  styleUrls: ['./enter-otp.page.scss'],\n})\nexport class EnterOtpPage implements OnInit {\n\n\notp: Number;\nnumber: String;\n\nisOtpValid: boolean = false;\n\n  constructor(private router: Router,\n              private authService: AuthService,\n              private route: ActivatedRoute,\n              public alertController: AlertController,\n              private LoadingCtrl: LoadingController,\n              private http: HttpClient,\n              private storage: StorageService) {\n                \n               }\n\n  ngOnInit() {\n    this.number = this.route.snapshot.paramMap.get('number'); \n    console.log(\"NUMBER\", this.number);    \n  }\n\n  getOTP(event){\n   \n      this.otp = event;\n      this.isOtpValid = true;\n    \n  }\n\n\n  async verifyOtp(event) {\n    const loading = await this.LoadingCtrl.create({\n      message: \"Please wait...\", \n      \n    });\n    loading.present();\n      this.authService.verifyToken(this.otp, this.number).subscribe(token => {\n        console.log(token);\n        if(token['success']) {\n          loading.dismiss();\n          console.log(token['success'].valid);\n          if(token['success'].valid === true) {\n            console.log(\"Otp token is valid\");\n            this.login();\n            \n          }\n          \n        }\n      }, (error) => {\n        console.log(error);\n        loading.dismiss();\n        this.presentAlert('ERROR', 'Go back and enter your number again!');\n        \n      })\n    \n    // this.router.navigate(['/tabs']);\n  }\n\n  async login() {\n    const loading = await this.LoadingCtrl.create({\n      message: \"Creating profile...\", \n      \n    });\n    loading.present();\n\n    let body = {\n      contactNumber: this.number\n      }\n    this.http.post(environment.API_URL+'/user/register' ,body)\n    .subscribe(async (user) => {\n      console.log(user['userId']);\n      if(user){\n        this.storage.set('userId', user['userId']).then(userId => {\n          loading.dismiss();\n          this.router.navigate(['location']);\n        }).catch(error => {\n          console.log(error);\n          \n        })\n        \n      }\n    },(error) => {\n      loading.dismiss();\n      console.log(error.message);\n      this.presentAlert('ERROR!', error.message);\n      \n    })\n  }\n\n  async presentAlert(err, msg) {\n    const alert = await this.alertController.create({\n      cssClass: 'my-custom-class',\n      header: err,\n      subHeader:msg,\n      buttons: [\n        {\n          text: 'OK',\n          handler: () =>{\n            this.router.navigate(['']);\n          }\n        }\n      ],\n    \n    });\n\n    await alert.present();\n  }\n}\n","export default \"@import url(\\\"https://fonts.googleapis.com/css2?family=Lato:wght@900&display=swap\\\");\\nbody {\\n  font-family: \\\"Lato\\\", sans-serif;\\n}\\n#partitioned {\\n  padding-left: 15px;\\n  letter-spacing: 42px;\\n  border: 0;\\n  background-image: linear-gradient(to left, #05a074 70%, rgba(255, 255, 255, 0) 0%);\\n  background-position: bottom;\\n  background-size: 50px 1px;\\n  background-repeat: repeat-x;\\n  background-position-x: 35px;\\n  width: 220px;\\n  min-width: 302px;\\n}\\n#divInner {\\n  left: 0;\\n  position: sticky;\\n}\\n#divOuter {\\n  width: 290px;\\n  overflow: hidden;\\n}\\nion-title {\\n  font-weight: bold;\\n}\\nion-button {\\n  height: 60px;\\n  width: 100%;\\n  margin: 0px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2VudGVyLW90cC5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQVEsa0ZBQUE7QUFHUjtFQUNJLCtCQUFBO0FBREo7QUFHQTtFQUNJLGtCQUFBO0VBQ0Esb0JBQUE7RUFDQSxTQUFBO0VBQ0Esa0ZBQUE7RUFDQSwyQkFBQTtFQUNBLHlCQUFBO0VBQ0EsMkJBQUE7RUFDQSwyQkFBQTtFQUNBLFlBQUE7RUFDQSxnQkFBQTtBQUFKO0FBR0U7RUFDRSxPQUFBO0VBQ0EsZ0JBQUE7QUFBSjtBQUdFO0VBQ0UsWUFBQTtFQUNBLGdCQUFBO0FBQUo7QUFHRTtFQUNFLGlCQUFBO0FBQUo7QUFHRTtFQUNFLFlBQUE7RUFDQSxXQUFBO0VBQ0EsV0FBQTtBQUFKIiwiZmlsZSI6ImVudGVyLW90cC5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJAaW1wb3J0IHVybCgnaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3MyP2ZhbWlseT1MYXRvOndnaHRAOTAwJmRpc3BsYXk9c3dhcCcpO1xyXG5cclxuXHJcbmJvZHl7XHJcbiAgICBmb250LWZhbWlseTogJ0xhdG8nLCBzYW5zLXNlcmlmO1xyXG59XHJcbiNwYXJ0aXRpb25lZCB7XHJcbiAgICBwYWRkaW5nLWxlZnQ6IDE1cHg7XHJcbiAgICBsZXR0ZXItc3BhY2luZzogNDJweDtcclxuICAgIGJvcmRlcjowO1xyXG4gICAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KHRvIGxlZnQsICMwNWEwNzQgNzAlLCByZ2JhKDI1NSwgMjU1LCAyNTUsIDApIDAlKTtcclxuICAgIGJhY2tncm91bmQtcG9zaXRpb246IGJvdHRvbTtcclxuICAgIGJhY2tncm91bmQtc2l6ZTogNTBweCAxcHg7XHJcbiAgICBiYWNrZ3JvdW5kLXJlcGVhdDogcmVwZWF0LXg7XHJcbiAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uLXg6IDM1cHg7XHJcbiAgICB3aWR0aDogMjIwcHg7XHJcbiAgICBtaW4td2lkdGg6IDMwMnB4O1xyXG4gIH1cclxuICBcclxuICAjZGl2SW5uZXJ7XHJcbiAgICBsZWZ0OiAwO1xyXG4gICAgcG9zaXRpb246IHN0aWNreTtcclxuICB9XHJcbiAgXHJcbiAgI2Rpdk91dGVye1xyXG4gICAgd2lkdGg6IDI5MHB4OyBcclxuICAgIG92ZXJmbG93OiBoaWRkZW47XHJcbiAgfVxyXG5cclxuICBpb24tdGl0bGV7XHJcbiAgICBmb250LXdlaWdodDogYm9sZDtcclxuICB9XHJcblxyXG4gIGlvbi1idXR0b257XHJcbiAgICBoZWlnaHQ6IDYwcHg7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICAgIG1hcmdpbjogMHB4O1xyXG59Il19 */\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { EnterOtpPage } from './enter-otp.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: EnterOtpPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class EnterOtpPageRoutingModule {}\n"],"sourceRoot":"webpack:///"}